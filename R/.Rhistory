for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2$en))
}
return(y)
}
retrieve_countries()
countries =
retrieve_countries = function(){
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
y = c()
for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2$en))
}
return(y)
}
retrieve_countries()
y = retrieve_countries()
y
dput(y)
countries = c("er", "ee", "ru", "is", "st", "pw", "kw", "iq", "by", "ae",
"gf", "tv", "lu", "ms", "pr", "re", "yu", "bj", "mw", "us", "ax",
"cy", "bi", "ar", "mm", "lb", "ir", "gn", "cf", "bz", "ca", "tg",
"cg", "it", "hr", "io", "ua", "gr", "at", "kh", "gs", "fo", "sc",
"aq", "dm", "mt", "cn", "bt", "mv", "gi", "pf", "bn", "pe", "sy",
"tz", "si", "bm", "be", "zw", "ci", "sm", "ro", "nz", "bs", "tj",
"in", "sb", "la", "dk", "bo", "vn", "am", "so", "vc", "aw", "eh",
"ml", "im", "uz", "ch", "rw", "ps", "rs", "ck", "il", "nu", "bw",
"np", "jo", "pt", "dj", "pl", "tf", "ky", "sh", "cu", "li", "et",
"zm", "py", "sd", "om", "eg", "gg", "mo", "hn", "mh", "gh", "mn",
"vg", "gm", "sn", "id", "ni", "kn", "gl", "cz", "mx", "to", "pn",
"nf", "bh", "qa", "jm", "ws", "ye", "um", "uk", "uy", "ke", "va",
"tc", "tr", "cv", "xk", "tn", "sk", "bl", "ag", "tl", "bg", "pg",
"nr", "kr", "my", "hk", "al", "fr", "tt", "bf", "world", "af",
"ai", "na", "md", "bb", "bq", "ki", "bd", "mz", "je", "yt", "wf",
"pa", "gq", "gy", "gu", "de", "do", "nl", "co", "ge", "cd", "tw",
"lk", "cc", "ma", "ly", "fk", "vu", "pm", "mp", "sl", "fi", "za",
"fm", "tk", "th", "no", "ie", "km", "ss", "au", "fj", "es", "lr",
"gp", "jp", "gt", "kg", "mk", "ba", "sv", "gw", "ug", "az", "pk",
"lc", "dz", "sa", "ec", "cm", "cx", "ht", "mf", "ls", "ph", "cw",
"mq", "kp", "cr", "ng", "lv", "mu", "lt", "ne", "bv", "se", "tm",
"vi", "sg", "hu", "ad", "sj", "nc", "sz", "ao", "cl", "ga", "br",
"sr", "ve", "as", "me", "kz", "mc", "mr", "gd", "td", "sx", "hm",
"mg")
countries
y == countries
update_countries = function(){
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
y = c()
for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2$en))
}
assign("countries", y, envir = .GlobalEnv)
}
update_countries()
countries
rm(countries)
update_countries()
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
x
x$`en:azerbaijan`$name$en
test = c(1,2,3,4)
test2 = c(5,6,7,8)
data.frame(test, test2)
update_countries = function(){
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
y = c()
z = c()
for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2$en))
z = c(z, x[[i]]$name$en)
}
a = data.frame(z, y)
assign("countries", a, envir = .GlobalEnv)
}
x = update_countries()
x
x$`en:eritrea`$name
x$`en:eritrea`$name[1]
update_countries = function(){
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
y = c()
z = c()
for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2$en))
z = c(z, x[[i]]$name[1])
}
a = data.frame(z, y)
assign("countries", a, envir = .GlobalEnv)
}
update_countries()
countries
x$`en:eritrea`$name[1]
x$`en:eritrea`$name[[1]]
update_countries()
countries
names(countries)
x$`en:eritrea`$name[[1]]
x$`en:eritrea`$name[[2]]
x$`en:eritrea`$name[[3]]
x[[1]]$name[[1]]
x[[2]]$name[[1]]
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
y = c()
z = c()
for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2$en))
z = c(z, x[[i]]$name[[1]])
}
y
z
data.frame(z, y)
length(z)
length(y)
y
x
x[[1]]$country_code_2$en
x[[2]]$country_code_2$en
x[[2]]$country_code_2[[1]]
update_countries = function(){
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
y = c()
z = c()
for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2[[1]]))
z = c(z, x[[i]]$name[[1]])
}
a = data.frame(z, y)
assign("countries", a, envir = .GlobalEnv)
}
for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2[[1]]))
z = c(z, x[[i]]$name[[1]])
}
z
y = c()
z = c()
for (i in 1:length(x)){
y = c(y, tolower(x[[i]]$country_code_2[[1]]))
z = c(z, x[[i]]$name[[1]])
}
z
y
data.frame(z, y)
tail(z)
tail(y)
tail(z, 10)
x$`en:chad`$country_code_2$en
for (i in 1:length(x)){
if(tolower(x[[i]]$country_code_2[[1]]))){}
for (i in 1:length(x)){
if(x[[i]]$country_code_2[[1]]){print(i)}
if(x[[i]]$name[[1]]){print(i)}
}
for (i in 1:length(x)){
if(!exists(x[[i]]$country_code_2[[1]])){print(i)}
if(!exists(x[[i]]$name[[1]])){print(i)}
}
x[[5]]
for (i in 1:length(x)){
if(exists(x[[i]]$country_code_2[[1]])){print(i)}
if(exists(x[[i]]$name[[1]])){print(i)}
}
?exists
exists(t)
exists(y)
exists(z)
get0(y)
get0(t)
get0("y")
exists("y")
x[[1]]$country_code_2[[1]]
x[[5]]$country_code_2[[1]]
x[[5]]$country_code_2[[1]] != NULL
x[[5]]$country_code_2[[1]] == NULL
x[[5]]$country_code_2[[1]] != "NULL"
is.null(x[[5]]$country_code_2[[1]])
!is.null(x[[5]]$country_code_2[[1]])
!is.null(x[[1]]$country_code_2[[1]])
update_countries = function(){
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
y = c()
z = c()
for (i in 1:length(x)){
if ((!is.null(x[[i]]$country_code_2[[1]])) & (!is.null(x[[i]]$name[[1]]))){
y = c(y, tolower(x[[i]]$country_code_2[[1]]))
z = c(z, x[[i]]$name[[1]])
}
}
a = data.frame(z, y)
assign("countries", a, envir = .GlobalEnv)
}
update_countries()
countries
x[[151]]
x[[149]]
x[[158]]
x[[158]]$name$en
x[[158]]$name$fr
x[[158]]$name[[1]]
update_countries = function(){
x = jsonlite::fromJSON(txt='https://static.openfoodfacts.org/data/taxonomies/countries.json')
y = c()
z = c()
for (i in 1:length(x)){
if ((!is.null(x[[i]]$country_code_2[[1]])) & (!is.null(x[[i]]$name$en))){
y = c(y, tolower(x[[i]]$country_code_2[[1]]))
z = c(z, x[[i]]$name$en)
}
}
a = data.frame(z, y)
assign("countries", a, envir = .GlobalEnv)
}
update_countries()
countries
?print
print("t", "y")
print("t")
print("t"); print("k")
print("t"); print("k", quote=FALSE)
message("t")
message("t", "y")
message("t", "y"), message("t")
message("t", "y"); message("t")
cat("t", "y"); cat("t")
cat("Number", "\t | \t", Name)
cat("Number", "\t | \t", "Name")
lst = 1:12
cat("Number", "\t | \t", "Name")
for (i in 1:length(lst)){
cat(i, "\t | \t", lst[i, 1])
}
cat("Number", "\t | \t", "Name")
for (i in 1:length(lst)){
cat(i, "\t | \t", lst[i])
}
cat("Number", "\t | \t", "Name")
for (i in 1:length(lst)){
cat(i, "\t | \t", lst[i], "\n")
}
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------")
for (i in 1:length(lst)){
cat(i, "\t | \t", lst[i, 1], "\n")
}
}
product('eggs')
search_by_name = function(term){
require(httr); require(XML)
req = httr::content(httr::GET(paste0('https://world.openfoodfacts.org/cgi/search.pl?search_terms=', term, '&search_simple=1&action=process')), 'parse')
resXML = XML::htmlParse(req)
lst = XML::getNodeSet(resXML, "//*[@class='products']/li")
titles = c()
prodnums = c()
for (i in 1:length(lst)){
titles = c(titles, gsub(".*<span>|</span>.*", "", XML::toString.XMLNode(lst[[i]])))
prodnums = c(prodnums, gsub(".*href=\"/product/|/.*", "", XML::toString.XMLNode(lst[[i]])))
}
return(data.frame(titles, prodnums))
}
product('eggs')
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:length(lst)){
cat(i, "\t | \t", lst[i, 2], "\n")
}
}
product('eggs')
search_by_name('eggs')
x = search_by_name('eggs')
x[1, 2]
search_by_name = function(term){
require(httr); require(XML)
req = httr::content(httr::GET(paste0('https://world.openfoodfacts.org/cgi/search.pl?search_terms=', term, '&search_simple=1&action=process')), 'parse')
resXML = XML::htmlParse(req)
lst = XML::getNodeSet(resXML, "//*[@class='products']/li")
titles = c()
prodnums = c()
for (i in 1:length(lst)){
titles = c(titles, gsub(".*<span>|</span>.*", "", XML::toString.XMLNode(lst[[i]])))
prodnums = c(prodnums, gsub(".*href=\"/product/|/.*", "", XML::toString.XMLNode(lst[[i]])))
}
return(data.frame(titles, as.numeric(prodnums)))
}
x = search_by_name('eggs')
x[1,2]
x
x[1,]
search_by_name = function(term){
require(httr); require(XML)
req = httr::content(httr::GET(paste0('https://world.openfoodfacts.org/cgi/search.pl?search_terms=', term, '&search_simple=1&action=process')), 'parse')
resXML = XML::htmlParse(req)
lst = XML::getNodeSet(resXML, "//*[@class='products']/li")
titles = c()
prodnums = c()
for (i in 1:length(lst)){
titles = c(titles, gsub(".*<span>|</span>.*", "", XML::toString.XMLNode(lst[[i]])))
prodnums = c(prodnums, gsub(".*href=\"/product/|/.*", "", XML::toString.XMLNode(lst[[i]])))
}
return(data.frame(titles, 'titles'=as.numeric(prodnums)))
}
x = search_by_name('eggs')
x[1,]
search_by_name = function(term){
require(httr); require(XML)
req = httr::content(httr::GET(paste0('https://world.openfoodfacts.org/cgi/search.pl?search_terms=', term, '&search_simple=1&action=process')), 'parse')
resXML = XML::htmlParse(req)
lst = XML::getNodeSet(resXML, "//*[@class='products']/li")
titles = c()
prodnums = c()
for (i in 1:length(lst)){
titles = c(titles, gsub(".*<span>|</span>.*", "", XML::toString.XMLNode(lst[[i]])))
prodnums = c(prodnums, gsub(".*href=\"/product/|/.*", "", XML::toString.XMLNode(lst[[i]])))
}
return(data.frame(titles, 'prodnums'=as.numeric(prodnums)))
}
x = search_by_name('eggs')
x[1,]
x[1,1]
search_by_name = function(term){
require(httr); require(XML)
req = httr::content(httr::GET(paste0('https://world.openfoodfacts.org/cgi/search.pl?search_terms=', term, '&search_simple=1&action=process')), 'parse')
resXML = XML::htmlParse(req)
lst = XML::getNodeSet(resXML, "//*[@class='products']/li")
titles = c()
prodnums = c()
for (i in 1:length(lst)){
titles = c(titles, gsub(".*<span>|</span>.*", "", XML::toString.XMLNode(lst[[i]])))
prodnums = c(prodnums, gsub(".*href=\"/product/|/.*", "", XML::toString.XMLNode(lst[[i]])))
}
return(data.frame('titles'=as.character(titles), 'prodnums'=as.numeric(prodnums)))
}
x = search_by_name('eggs')
x[1,1]
search_by_name = function(term){
require(httr); require(XML)
req = httr::content(httr::GET(paste0('https://world.openfoodfacts.org/cgi/search.pl?search_terms=', term, '&search_simple=1&action=process')), 'parse')
resXML = XML::htmlParse(req)
lst = XML::getNodeSet(resXML, "//*[@class='products']/li")
titles = c()
prodnums = c()
for (i in 1:length(lst)){
titles = c(titles, gsub(".*<span>|</span>.*", "", XML::toString.XMLNode(lst[[i]])))
prodnums = c(prodnums, gsub(".*href=\"/product/|/.*", "", XML::toString.XMLNode(lst[[i]])))
}
return(data.frame('titles'=toString(titles), 'prodnums'=as.numeric(prodnums)))
}
x = search_by_name('eggs')
x[1,1]
search_by_name = function(term){
require(httr); require(XML)
req = httr::content(httr::GET(paste0('https://world.openfoodfacts.org/cgi/search.pl?search_terms=', term, '&search_simple=1&action=process')), 'parse')
resXML = XML::htmlParse(req)
lst = XML::getNodeSet(resXML, "//*[@class='products']/li")
titles = c()
prodnums = c()
for (i in 1:length(lst)){
titles = c(titles, gsub(".*<span>|</span>.*", "", XML::toString.XMLNode(lst[[i]])))
prodnums = c(prodnums, gsub(".*href=\"/product/|/.*", "", XML::toString.XMLNode(lst[[i]])))
}
return(data.frame('titles'=as.character(titles), 'prodnums'=as.numeric(prodnums)))
}
x = search_by_name('eggs')
x[1,1]
x[1,2]
search_by_name = function(term){
require(httr); require(XML)
req = httr::content(httr::GET(paste0('https://world.openfoodfacts.org/cgi/search.pl?search_terms=', term, '&search_simple=1&action=process')), 'parse')
resXML = XML::htmlParse(req)
lst = XML::getNodeSet(resXML, "//*[@class='products']/li")
titles = c()
prodnums = c()
for (i in 1:length(lst)){
titles = c(titles, gsub(".*<span>|</span>.*", "", XML::toString.XMLNode(lst[[i]])))
prodnums = c(prodnums, gsub(".*href=\"/product/|/.*", "", XML::toString.XMLNode(lst[[i]])))
}
return(data.frame('titles'=as.character(titles), 'prodnums'=as.character(prodnums)))
}
x = search_by_name('eggs')
x[1,2]
unname(x[1,2])
as.character(x[1,2])
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:length(lst)){
cat(i, "\t | \t", as.character(lst[i, 2]), "\n")
}
}
product('eggs')
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:nrow(lst)){
cat(i, "\t | \t", as.character(lst[i, 2]), "\n")
}
}
product('eggs')
"sefrbrbrbt"[;4]
"sefrbrbrbt"[:4]
"sefrbrbrbt"[1:4]
test = "sefrbrbrbt"
test[1]
test[1, 2]
test[1][2]
substr(test, 1, 5)
test
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:nrow(lst)){
cat(i, "\t | \t", substr(as.character(lst[i, 1]), 1, 10), " ... \n")
}
}
product('eggs')
x = search_by_name('eggs')
x
product = function(term){
lst = x
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:nrow(lst)){
cat(i, "\t | \t", substr(as.character(lst[i, 1]), 1, 10), " ... \n")
}
}
product('e')
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:nrow(lst)){
cat(i, "\t | \t", substr(as.character(lst[i, 1]), 1, 20), " ... \n")
Sys.sleep(0.2)
}
}
product('eggs')
var = readline()
var
#url....json?fields=<parameter>
build_URL = function(prodnum, country = 'world', filters=''){
return(paste0('https://', country, '-en.openfoodfacts.org/api/v0/', prodnum, '.json'))
}
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:nrow(lst)){
cat(i, "\t | \t", substr(as.character(lst[i, 1]), 1, 20), " ... \n")
Sys.sleep(0.2)
}
cat("Please select the \'Number\' of the product: \n")
num = readline()
url = build_URL(lst[num, 2])
return(jsonlite::fromJSON(txt=url))
}
x = product('eggs')
x
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:nrow(lst)){
cat(i, "\t | \t", substr(as.character(lst[i, 1]), 1, 20), " ... \n")
Sys.sleep(0.2)
}
cat("Please select the \'Number\' of the product: \n")
num = readline()
url = build_URL(lst[num, 2])
print(url)
return(jsonlite::fromJSON(txt=url))
}
x = product('eggs')
#url....json?fields=<parameter>
build_URL = function(prodnum, country = 'world', filters=''){
return(paste0('https://', country, '-en.openfoodfacts.org/api/v0/product/', prodnum, '.json'))
}
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:nrow(lst)){
cat(i, "\t | \t", substr(as.character(lst[i, 1]), 1, 20), " ... \n")
Sys.sleep(0.2)
}
cat("Please select the \'Number\' of the product: \n")
num = readline()
url = build_URL(lst[num, 2])
return(jsonlite::fromJSON(txt=url))
}
x = product('eggs')
x
product = function(term){
lst = search_by_name(term)
cat("Number", "\t | \t", "Name", "\n")
cat("-------------------", "\n")
for (i in 1:nrow(lst)){
cat(i, "\t | \t", substr(as.character(lst[i, 1]), 1, 30), " ... \n")
Sys.sleep(0.2)
}
cat("Please select the \'Number\' of the product: \n")
num = readline()
url = build_URL(lst[num, 2])
return(jsonlite::fromJSON(txt=url))
}
x = product('eggs')
x
